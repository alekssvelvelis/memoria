{"ast":null,"code":"import React,{useState,useEffect}from'react';import Header from'../Header';import ProfileUserForm from'./ProfileUserForm';import ProfileAchievements from'./ProfileAchievements';import ProfileGameHistory from'./ProfileGameHistory';import ProfileBackgroundSelection from'./ProfileBackgroundSelection';import GoogleUserFirstTime from'./GoogleUserFirstTime';import VantaBackground from'../Backgrounds/VantaBackground';import BackgroundReceiver from'../Backgrounds/BackgroundReceiver';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function ProfileInformation(){const isLoggedInObject=localStorage.getItem('token');const isLoggedIn=isLoggedInObject?JSON.parse(isLoggedInObject).value:null;const[userData,setUserData]=useState({});const[currentName,setCurrentName]=useState('');const[currentBackground,setCurrentBackground]=useState('');const[money,setMoney]=useState(0);useEffect(()=>{const getUserMoney=async()=>{try{const response=await fetch('http://localhost/api/getUserMoney',{method:'GET',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(isLoggedIn)}});if(response.ok){const data=await response.json();setMoney(data.money);}else{const errorData=await response.json();console.error('Error fetching user info:',errorData);}}catch(error){console.error('Error fetching user info:',error);}};getUserMoney();},[isLoggedIn]);const handleUserDataChange=(newUserData,newCurrentName)=>{setUserData(newUserData);setCurrentName(newCurrentName);};const handleUserBackgroundChange=newUserBackground=>{setCurrentBackground(newUserBackground);};const handlePurchaseBackground=newMoney=>{setMoney(newMoney);};const[isGoogleModalOpen,setGoogleModalOpen]=useState(false);useEffect(()=>{if(userData.username===null&&userData.google_id){setGoogleModalOpen(true);}},[userData]);const toggleGoogleModal=()=>{setGoogleModalOpen(!isGoogleModalOpen);};return/*#__PURE__*/_jsxs(_Fragment,{children:[currentBackground?/*#__PURE__*/_jsx(VantaBackground,{effect:currentBackground,classes:\"min-h-screen w-screen fixed top-0 left-0\"}):/*#__PURE__*/_jsx(BackgroundReceiver,{isLoggedIn:isLoggedIn}),/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-y-scroll min-h-screen absolute bg-[rgb(18,18,18,0.6)] flex justify-center w-full text-white flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-[10vh]\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"h-full w-[100%] flex flex-col justify-center items-center my-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-[85%] flex max-[425px]:flex-col sm:ml-8 text-center items-center justify-center sm:justify-start\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"uppercase text-2xl sm:text-4xl tracking-widest\",children:[\"Welcome \",currentName,\"!\"]}),/*#__PURE__*/_jsxs(\"h1\",{className:\"uppercase text-2xl sm:text-4xl tracking-widest ml-auto mr-8 max-[425px]:hidden\",children:[money,\" \\uD83D\\uDCB8\"]}),/*#__PURE__*/_jsxs(\"h1\",{className:\"uppercase text-2xl sm:text-4xl tracking-widest hidden max-[425px]:flex mt-4\",children:[\"YOU have: \",money,\" \\uD83D\\uDCB8\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl bg-[rgb(44,44,44,0.8)] w-[85%] min-h-[90%] flex flex-col m-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-full flex flex-col sm:flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sm:w-1/2 w-full h-full flex flex-col items-center justify-center m-2 ml-0\",children:/*#__PURE__*/_jsx(ProfileUserForm,{onUserDataChange:handleUserDataChange,defaultUsername:currentName,email:userData.email})}),/*#__PURE__*/_jsx(\"div\",{className:\"sm:w-1/2 w-full flex justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full flex flex-col justify-around items-center\",children:[/*#__PURE__*/_jsx(ProfileAchievements,{}),/*#__PURE__*/_jsx(ProfileBackgroundSelection,{onUserBackgroundChange:handleUserBackgroundChange,onHandlePurchase:handlePurchaseBackground})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-[92%] h-full flex flex-col items-center justify-center m-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-[100%] min-h-[90%] mb-4 rounded-xl flex flex-col items-center bg-[rgb(26,26,26,0.9)]\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-[40%] flex justify-center items-center text-center m-2\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"uppercase text-4xl tracking-widest my-2\",children:\"YOUR GAME HISTORY:\"})}),/*#__PURE__*/_jsx(ProfileGameHistory,{})]})})})]}),isGoogleModalOpen&&/*#__PURE__*/_jsx(GoogleUserFirstTime,{onClose:toggleGoogleModal,email:userData.email,onUsernameChosen:username=>{setCurrentName(username);}})]})]})]});}export default ProfileInformation;","map":{"version":3,"names":["React","useState","useEffect","Header","ProfileUserForm","ProfileAchievements","ProfileGameHistory","ProfileBackgroundSelection","GoogleUserFirstTime","VantaBackground","BackgroundReceiver","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProfileInformation","isLoggedInObject","localStorage","getItem","isLoggedIn","JSON","parse","value","userData","setUserData","currentName","setCurrentName","currentBackground","setCurrentBackground","money","setMoney","getUserMoney","response","fetch","method","headers","concat","ok","data","json","errorData","console","error","handleUserDataChange","newUserData","newCurrentName","handleUserBackgroundChange","newUserBackground","handlePurchaseBackground","newMoney","isGoogleModalOpen","setGoogleModalOpen","username","google_id","toggleGoogleModal","children","effect","classes","className","onUserDataChange","defaultUsername","email","onUserBackgroundChange","onHandlePurchase","onClose","onUsernameChosen"],"sources":["/Users/alekssvelvelis/Desktop/memory-game/src/components/Profile/ProfileInformation.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Header from '../Header';\nimport ProfileUserForm from './ProfileUserForm';\nimport ProfileAchievements from './ProfileAchievements';\nimport ProfileGameHistory from './ProfileGameHistory';\nimport ProfileBackgroundSelection from './ProfileBackgroundSelection';\nimport GoogleUserFirstTime from './GoogleUserFirstTime';\nimport VantaBackground from '../Backgrounds/VantaBackground';\nimport BackgroundReceiver from '../Backgrounds/BackgroundReceiver';\nfunction ProfileInformation(){\n\n    const isLoggedInObject = localStorage.getItem('token');\n    const isLoggedIn = isLoggedInObject ? JSON.parse(isLoggedInObject).value : null;\n\n    const [userData, setUserData] = useState({});\n    const [currentName, setCurrentName] = useState('');\n    const [currentBackground, setCurrentBackground] = useState('');\n    const [money, setMoney] = useState(0);\n\n    useEffect(() => {\n        const getUserMoney = async () => {\n            try {\n                const response = await fetch('http://localhost/api/getUserMoney', {\n                    method: 'GET',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': `Bearer ${isLoggedIn}`,\n                    },\n                });\n                if (response.ok) {\n                    const data = await response.json();\n                    setMoney(data.money);\n                } else {\n                    const errorData = await response.json();\n                    console.error('Error fetching user info:', errorData);\n                }\n            } catch (error) {\n                console.error('Error fetching user info:', error);\n            }\n        };\n\n        getUserMoney();\n    }, [isLoggedIn]);\n\n    const handleUserDataChange = (newUserData, newCurrentName) => {\n        setUserData(newUserData);\n        setCurrentName(newCurrentName);\n    };\n    const handleUserBackgroundChange = (newUserBackground) => {\n        setCurrentBackground(newUserBackground);\n    };\n    const handlePurchaseBackground = (newMoney) => {\n        setMoney(newMoney);\n    };\n\n    const [isGoogleModalOpen, setGoogleModalOpen] = useState(false);\n    useEffect(() => {\n        if (userData.username === null && userData.google_id) {\n          setGoogleModalOpen(true);\n        }\n    }, [userData]);\n    \n    const toggleGoogleModal = () => {\n        setGoogleModalOpen(!isGoogleModalOpen);\n    }\n\n    return(\n        <>\n        {currentBackground ? <VantaBackground effect={currentBackground} classes=\"min-h-screen w-screen fixed top-0 left-0\"/>:<BackgroundReceiver isLoggedIn={isLoggedIn}/>}\n        <Header/>\n        <div className={`overflow-y-scroll min-h-screen absolute bg-[rgb(18,18,18,0.6)] flex justify-center w-full text-white flex-col`}>\n            <div className='w-full h-[10vh]'></div>\n            <div className='h-full w-[100%] flex flex-col justify-center items-center my-6'>\n                <div className='w-[85%] flex max-[425px]:flex-col sm:ml-8 text-center items-center justify-center sm:justify-start'>\n                    <h1 className='uppercase text-2xl sm:text-4xl tracking-widest'>Welcome {currentName}!</h1>\n                    <h1 className='uppercase text-2xl sm:text-4xl tracking-widest ml-auto mr-8 max-[425px]:hidden'>{money} ðŸ’¸</h1>   \n                    <h1 className='uppercase text-2xl sm:text-4xl tracking-widest hidden max-[425px]:flex mt-4'>YOU have: {money} ðŸ’¸</h1>\n                </div>\n                <div className='rounded-xl bg-[rgb(44,44,44,0.8)] w-[85%] min-h-[90%] flex flex-col m-4'>\n                    <div className='w-full flex flex-col sm:flex-row'>\n                        <div className='sm:w-1/2 w-full h-full flex flex-col items-center justify-center m-2 ml-0'>\n                            <ProfileUserForm onUserDataChange={handleUserDataChange} defaultUsername={currentName} email={userData.email}/>\n                        </div>\n                        <div className='sm:w-1/2 w-full flex justify-center'>\n                            <div className='w-full flex flex-col justify-around items-center'>\n                                <ProfileAchievements/>\n                                <ProfileBackgroundSelection onUserBackgroundChange={handleUserBackgroundChange} onHandlePurchase={handlePurchaseBackground}/>\n                            </div>\n                        </div>\n                    </div>\n                    <div className='w-full flex justify-center'>\n                        <div className='w-[92%] h-full flex flex-col items-center justify-center m-2'>\n                            <div className='w-[100%] min-h-[90%] mb-4 rounded-xl flex flex-col items-center bg-[rgb(26,26,26,0.9)]'>\n                                <div className='w-full h-[40%] flex justify-center items-center text-center m-2'>\n                                    <h1 className='uppercase text-4xl tracking-widest my-2'>YOUR GAME HISTORY:</h1>\n                                </div>\n                                <ProfileGameHistory/>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {isGoogleModalOpen && (\n                    <GoogleUserFirstTime onClose={toggleGoogleModal} email={userData.email} onUsernameChosen={(username) => {setCurrentName(username)}}/>\n                )}\n            </div>\n        </div>\n        </>\n    );\n}\n\nexport default ProfileInformation;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}